{% load static i18n %}
<!DOCTYPE html>
<html lang="en" class="h-full scroll-smooth" x-data="{
          darkMode: localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches),
          scrollProgress: 0,
          showBackToTop: false,
          mobileMenuOpen: false
      }" x-init="$watch('darkMode', val => {
                localStorage.setItem('theme', val ? 'dark' : 'light');
                if (val) document.documentElement.classList.add('dark');
                else document.documentElement.classList.remove('dark');
             });
             if (darkMode) document.documentElement.classList.add('dark');
             window.addEventListener('scroll', () => {
                const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                scrollProgress = (winScroll / height) * 100;
                showBackToTop = winScroll > 500;
             });">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Il Mercato Hotel - Sharm El Sheikh{% endblock title %}</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="{% static 'images/favicons/rounded-fav.png' %}">

  <!-- Tailwind CSS -->
  <link rel="stylesheet" href="{% static 'css/tailwind.css' %}">

  <!-- Alpine.js -->
  <script defer src="{% static 'js/alpine.min.js' %}"></script>

  <!-- Application JavaScript -->
  <script defer src="{% static 'js/app.js' %}"></script>
  <script defer src="{% static 'js/main.js' %}"></script>

  <!-- Notifications -->
  <script defer src="{% static 'js/notifications.js' %}"></script>

  {% block extra_css %}{% endblock %}
</head>

<body
  class="h-full flex flex-col font-sans antialiased text-gray-900 bg-gray-50 dark:text-gray-100 dark:bg-gray-900 selection:bg-gold-500 selection:text-white transition-colors duration-300">

  <!-- Scroll Progress Bar -->
  <div data-scroll-progress class="fixed top-0 left-0 h-1 bg-gradient-to-r from-gold-300 to-gold-600 z-[60] transition-all duration-100"
    :style="'width: ' + scrollProgress + '%'"></div>

  <!-- Back to Top Button -->
  <button data-back-to-top x-show="showBackToTop" x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0 translate-y-8" x-transition:enter-end="opacity-100 translate-y-0"
    x-transition:leave="transition ease-in duration-300" x-transition:leave-start="opacity-100 translate-y-0"
    x-transition:leave-end="opacity-0 translate-y-8" @click="window.scrollTo({top: 0, behavior: 'smooth'})"
    class="fixed bottom-8 right-8 z-40 p-3 rounded-full bg-gold-500 text-white shadow-lg shadow-gold-500/30 hover:bg-gold-600 hover:scale-110 active:scale-95 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-gold-400 focus:ring-offset-2 dark:focus:ring-offset-gray-900">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
      stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18" />
    </svg>
  </button>

  <!-- Navbar -->
  <header class="fixed w-full top-0 z-50 transition-all duration-300"
    :class="{ 'bg-white/90 dark:bg-gray-900/90 backdrop-blur-md shadow-lg': showBackToTop || mobileMenuOpen, 'bg-transparent': !showBackToTop && !mobileMenuOpen }">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex h-20 items-center justify-between">
        <div class="flex-1 md:flex md:items-center md:gap-12 pl-4 md:pl-0">
          <a class="block" href="{% url 'home' %}">
            <img src="{% static 'images/logo.png' %}" alt="Il Mercato Logo"
              class="h-16 w-16 object-cover rounded-xl transition-transform hover:scale-105">
          </a>
        </div>

        <div class="md:flex md:items-center md:gap-8">
          <nav aria-label="Global" class="hidden md:block">
            <ul class="flex items-center gap-8 text-sm font-bold font-sans tracking-wide uppercase">
              <li><a
                  :class="{ 'text-white': !showBackToTop && !mobileMenuOpen, 'text-gray-700 dark:text-gray-300': showBackToTop || mobileMenuOpen }"
                  class="transition hover:text-gold-500 dark:hover:text-gold-400" href="{% url 'home' %}"> Home </a>
              </li>
              <li><a
                  :class="{ 'text-white': !showBackToTop && !mobileMenuOpen, 'text-gray-700 dark:text-gray-300': showBackToTop || mobileMenuOpen }"
                  class="transition hover:text-gold-500 dark:hover:text-gold-400" href="#rooms"> Rooms </a></li>
              <li><a
                  :class="{ 'text-white': !showBackToTop && !mobileMenuOpen, 'text-gray-700 dark:text-gray-300': showBackToTop || mobileMenuOpen }"
                  class="transition hover:text-gold-500 dark:hover:text-gold-400" href="#offers"> Offers </a></li>
              <li><a
                  :class="{ 'text-white': !showBackToTop && !mobileMenuOpen, 'text-gray-700 dark:text-gray-300': showBackToTop || mobileMenuOpen }"
                  class="transition hover:text-gold-500 dark:hover:text-gold-400" href="{% url 'about' %}"> About </a>
              </li>
              <li><a
                  :class="{ 'text-white': !showBackToTop && !mobileMenuOpen, 'text-gray-700 dark:text-gray-300': showBackToTop || mobileMenuOpen }"
                  class="transition hover:text-gold-500 dark:hover:text-gold-400" href="#reviews"> Reviews </a></li>
            </ul>
          </nav>

          <div class="flex items-center gap-4">
            <!-- Theme Toggle -->
            <button @click="darkMode = !darkMode" class="p-2 rounded-full transition-colors"
              :class="{ 'text-white hover:bg-white/10': !showBackToTop && !mobileMenuOpen, 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800': showBackToTop || mobileMenuOpen }">
              <svg x-show="!darkMode" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
              </svg>
              <svg x-show="darkMode" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" x-cloak>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
              </svg>
            </button>

            <div class="hidden sm:flex sm:items-center sm:gap-3">
              {% if request.user.is_authenticated %}
              <form method="post" action="{% url 'account_logout' %}" class="inline">
                {% csrf_token %}
                <button type="submit" class="rounded-full border-2 px-6 py-2.5 text-sm font-bold transition-all hover:-translate-y-0.5 uppercase tracking-wider text-center cursor-pointer"
                  :class="{ 'border-white text-white hover:bg-white hover:text-gray-900': !showBackToTop && !mobileMenuOpen, 'border-gold-500 text-gold-600 dark:text-gold-400 hover:bg-gold-500 hover:text-white': showBackToTop || mobileMenuOpen }">Sign Out</button>
              </form>
              {% else %}
              <a class="rounded-full border-2 px-6 py-2.5 text-sm font-bold transition-all hover:-translate-y-0.5 uppercase tracking-wider text-center"
                :class="{ 'border-white text-white hover:bg-white hover:text-gray-900': !showBackToTop && !mobileMenuOpen, 'border-gold-500 text-gold-600 dark:text-gold-400 hover:bg-gold-500 hover:text-white': showBackToTop || mobileMenuOpen }"
                href="{% url 'account_login' %}">Login</a>
              <a class="rounded-full border-2 px-6 py-2.5 text-sm font-bold transition-all hover:-translate-y-0.5 uppercase tracking-wider text-center"
                :class="{ 'border-white text-white hover:bg-white hover:text-gray-900': !showBackToTop && !mobileMenuOpen, 'border-gold-500 text-gold-600 dark:text-gold-400 hover:bg-gold-500 hover:text-white': showBackToTop || mobileMenuOpen }"
                href="{% url 'account_signup' %}">Register</a>
              {% endif %}

              <a class="rounded-full bg-gradient-to-r from-gold-400 to-gold-600 px-8 py-3 text-sm font-bold text-white shadow-lg shadow-gold-500/20 transition-all hover:from-gold-500 hover:to-gold-700 hover:shadow-gold-500/40 hover:-translate-y-0.5 uppercase tracking-wider border border-transparent dark:border-gold-400/20"
                href="{% url 'booking' %}">
                Book A Stay
              </a>
            </div>

            <div class="block md:hidden">
              <button @click="mobileMenuOpen = !mobileMenuOpen" class="p-2 rounded-lg transition-all duration-300"
                :class="{ 'text-white hover:bg-white/10': !showBackToTop && !mobileMenuOpen, 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800': showBackToTop || mobileMenuOpen }">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24"
                  stroke="currentColor" stroke-width="1.5">
                  <path x-show="!mobileMenuOpen" stroke-linecap="round" stroke-linejoin="round"
                    d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" />
                  <path x-show="mobileMenuOpen" stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"
                    x-cloak />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div x-show="mobileMenuOpen" x-transition x-cloak
      class="md:hidden bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 shadow-xl">
      <nav class="flex flex-col p-4 space-y-4">
        <a class="text-gray-700 dark:text-gray-300 hover:text-gold-500 dark:hover:text-gold-400"
          href="{% url 'home' %}">Home</a>
        <a class="text-gray-700 dark:text-gray-300 hover:text-gold-500 dark:hover:text-gold-400" href="#rooms">Rooms</a>
        <a class="text-gray-700 dark:text-gray-300 hover:text-gold-500 dark:hover:text-gold-400"
          href="#offers">Offers</a>
        <a class="text-gray-700 dark:text-gray-300 hover:text-gold-500 dark:hover:text-gold-400"
          href="{% url 'about' %}">About</a>
        <a class="text-gray-700 dark:text-gray-300 hover:text-gold-500 dark:hover:text-gold-400"
          href="#reviews">Reviews</a>
        <hr class="border-gray-200 dark:border-gray-800">
        <a class="text-gold-600 dark:text-gold-400 font-bold" href="{% url 'booking' %}">Book Now</a>
        {% if request.user.is_authenticated %}
        <form method="post" action="{% url 'account_logout' %}">
          {% csrf_token %}
          <button type="submit" class="text-gray-700 dark:text-gray-300 hover:text-gold-500 dark:hover:text-gold-400 font-bold text-left w-full cursor-pointer bg-transparent border-0 p-0">Sign Out</button>
        </form>
        {% else %}
        <a class="text-gray-700 dark:text-gray-300 hover:text-gold-500 dark:hover:text-gold-400 font-bold"
          href="{% url 'account_login' %}">Login</a>
        <a class="text-gray-700 dark:text-gray-300 hover:text-gold-500 dark:hover:text-gold-400 font-bold"
          href="{% url 'account_signup' %}">Register</a>
        {% endif %}
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-grow">
    <!-- Django Messages (will be converted to notifications by JS) -->
    {% if messages %}
    <div class="hidden">
      {% for message in messages %}
      <div role="alert" class="{% if message.tags %}{{ message.tags }}{% endif %}">
        {{ message }}
      </div>
      {% endfor %}
    </div>
    {% endif %}

    {% block content %}{% endblock content %}
  </main>

  <!-- Newsletter Section -->
  <section
    class="bg-gradient-to-r from-gray-50 from-10% via-white via-30% to-gray-50 to-90% dark:from-dark-800 dark:via-gray-900 dark:to-dark-800 py-20 border-t border-gray-200 dark:border-gray-800 transition-colors duration-300">
    <div class="mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8">
      <div
        class="bg-white dark:bg-gray-800 rounded-3xl p-8 lg:p-16 shadow-2xl relative overflow-hidden group border border-gray-100 dark:border-gray-700">
        <div
          class="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-gold-400/20 rounded-full blur-3xl group-hover:bg-gold-400/30 transition-all duration-700">
        </div>
        <div
          class="absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-gold-600/20 rounded-full blur-3xl group-hover:bg-gold-600/30 transition-all duration-700">
        </div>

        <div class="relative z-10 flex flex-col lg:flex-row items-center justify-between gap-12">
          <div class="text-center lg:text-left max-w-lg">
            <h2 class="text-3xl font-serif font-bold text-gray-900 dark:text-white mb-4">Unlock Exclusive Luxury</h2>
            <p class="text-gray-600 dark:text-gray-300">Subscribe to our newsletter for secret offers, early access to
              new suites, and curated travel guides to Sharm El Sheikh.</p>
          </div>

          <form class="w-full max-w-md flex flex-col sm:flex-row gap-4" onsubmit="event.preventDefault();">
            <input type="email" placeholder="Your email address"
              class="flex-1 rounded-2xl border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 px-6 py-4 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:border-gold-500 focus:ring-gold-500 shadow-sm transition-all"
              required>
            <button type="submit"
              class="rounded-2xl bg-gold-600 px-8 py-4 font-bold text-white shadow-lg shadow-gold-600/20 hover:bg-gold-700 hover:shadow-gold-600/40 hover:-translate-y-1 active:translate-y-0 transition-all duration-300 uppercase tracking-wide text-sm whitespace-nowrap">
              Subscribe
            </button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer
    class="bg-white dark:bg-dark-900 border-t border-gray-200 dark:border-gray-800 pt-16 pb-8 transition-colors duration-300">
    <div class="mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 gap-8 lg:grid-cols-3">
        <div>
          <a href="{% url 'home' %}" class="block mb-8">
            <img src="{% static 'images/footer.jpeg' %}" alt="Il Mercato"
              class="w-full h-72 object-cover rounded-2xl shadow-2xl transition-transform hover:scale-[1.02] duration-500">
          </a>
          <p class="mt-4 max-w-sm text-gray-500 dark:text-gray-400 text-sm leading-relaxed">
            Experience the pinnacle of luxury and comfort in the heart of Sharm El Sheikh. Designed for the discerning
            traveler.
          </p>
          <ul class="mt-8 flex gap-4">
            <!-- Facebook -->
            <li><a href="#"
                class="h-10 w-10 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:bg-[#1877F2] hover:text-white transition-all duration-300 shadow-sm hover:shadow-lg hover:-translate-y-1">
                <span class="sr-only">Facebook</span>
                <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path
                    d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.606 9.987V15.065h-4.66v-2.31c0-4.207 3.097-6.52 7.027-6.52 1.883 0 3.32.14 3.73.196v3.707h-2.12c-1.633 0-2.094.776-2.094 2.053v2.66h4.63l-.754 3.84h-3.876V22c4.95-.859 8.606-4.996 8.606-9.987z" />
                </svg>
              </a></li>

            <!-- Instagram -->
            <li><a href="#"
                class="h-10 w-10 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:bg-gradient-to-tr hover:from-[#f09433] hover:via-[#dc2743] hover:to-[#bc1888] hover:text-white transition-all duration-300 shadow-sm hover:shadow-lg hover:-translate-y-1">
                <span class="sr-only">Instagram</span>
                <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path fill-rule="evenodd"
                    d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772 4.902 4.902 0 011.772-1.153c.636-.247 1.363-.416 2.427-.465C9.673 2.013 10.03 2 12.428 2h.08zm-1.898 3.09c-1.306 0-2.433.003-2.583.007-.84.02-1.28.106-1.637.245-.515.201-.892.483-1.192.783-.3.3-.582.682-.783 1.197-.139.358-.225.803-.245 1.643-.005.15-.007 1.28-.007 2.586v.232c0 1.25.002 2.37.007 2.518.02.84.106 1.28.245 1.637.202.514.484.892.784 1.192.3.3.677.582 1.192.783.358.139.802.225 1.643-.245-.15-.005-1.275-.007-2.585-.007h-2.302zm5.753 2.022c.334 0 .604.27.604.604 0 .334-.27.604-.604.604a.604.604 0 110-1.208zm-5.753 1.986a4.088 4.088 0 100 8.176 4.088 4.088 0 000-8.176zm0 1.956a2.132 2.132 0 110 4.264 2.132 2.132 0 010-4.264z"
                    clip-rule="evenodd" />
                </svg></a></li>
          </ul>
        </div>

        <div class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:col-span-2 md:grid-cols-4">
          <div>
            <p class="font-medium text-gray-900 dark:text-white">Company</p>
            <ul class="mt-6 space-y-4 text-sm">
              <li><a href="#"
                  class="text-gray-700 dark:text-gray-400 transition hover:text-gold-500 dark:hover:text-gold-400">About</a>
              </li>
              <li><a href="#"
                  class="text-gray-700 dark:text-gray-400 transition hover:text-gold-500 dark:hover:text-gold-400">Careers</a>
              </li>
              <li><a href="#"
                  class="text-gray-700 dark:text-gray-400 transition hover:text-gold-500 dark:hover:text-gold-400">History</a>
              </li>
            </ul>
          </div>
          <div>
            <p class="font-medium text-gray-900 dark:text-white">Services</p>
            <ul class="mt-6 space-y-4 text-sm">
              <li><a href="#"
                  class="text-gray-700 dark:text-gray-400 transition hover:text-gold-500 dark:hover:text-gold-400">Dining</a>
              </li>
              <li><a href="#"
                  class="text-gray-700 dark:text-gray-400 transition hover:text-gold-500 dark:hover:text-gold-400">Spa &
                  Wellness</a></li>
              <li><a href="#"
                  class="text-gray-700 dark:text-gray-400 transition hover:text-gold-500 dark:hover:text-gold-400">Events</a>
              </li>
            </ul>
          </div>
          <div>
            <p class="font-medium text-gray-900 dark:text-white">Support</p>
            <ul class="mt-6 space-y-4 text-sm">
              <li><a href="#"
                  class="text-gray-700 dark:text-gray-400 transition hover:text-gold-500 dark:hover:text-gold-400">Contact
                  Us</a></li>
              <li><a href="#"
                  class="text-gray-700 dark:text-gray-400 transition hover:text-gold-500 dark:hover:text-gold-400">FAQs</a>
              </li>
              <li><a href="#"
                  class="text-gray-700 dark:text-gray-400 transition hover:text-gold-500 dark:hover:text-gold-400">Cancellation
                  Policy</a></li>
            </ul>
          </div>
          <div>
            <p class="font-medium text-gray-900 dark:text-white">Legal</p>
            <ul class="mt-6 space-y-4 text-sm">
              <li><a href="#"
                  class="text-gray-700 dark:text-gray-400 transition hover:text-gold-500 dark:hover:text-gold-400">Privacy
                  Policy</a></li>
              <li><a href="#"
                  class="text-gray-700 dark:text-gray-400 transition hover:text-gold-500 dark:hover:text-gold-400">Terms
                  of Service</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="mt-12 border-t border-gray-200 dark:border-gray-800 pt-8">
        <p class="text-xs text-gray-500 dark:text-gray-500 text-center">
          &copy; 2025 Il Mercato Hotel. All rights reserved.
        </p>
      </div>
    </div>
  </footer>

  {% block modal %}{% endblock modal %}
  {% block inline_javascript %}{% endblock inline_javascript %}
</body>

</html>